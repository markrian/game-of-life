<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Game of Life</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="life.js"></script>
<link href="style.css" rel="stylesheet">
</head>
<body>
	<div id="display">
	</div>
	<div id="controls">
		<button type="button" id="start">Start simulation</button>
		<button type="button" id="pause">Pause simulation</button>
		<button type="button" id="random">Randomise</button>
		<button type="button" id="reset">Reset</button>
	</div>
	<script>
		(function () {
			var game = new Game(),
				$ = function () {
						return document.getElementById.call(document, arguments[0]);
				},
				startButton = $('start'),
				pauseButton = $('pause'),
				randomButton = $('random'),
				resetButton = $('reset'),
				running = false,
				simulation;
			game.init(120, 40, true);

			function startPause(value) {
				if (value === "start") {
					if (running) {
						return;
					} else {
						simulation = setInterval(function () {
							game.simpleDraw();
							game.tick();
						}, 50);
						running = true;
						startButton.style.display = "none";
						pauseButton.style.display = "inline";
					}
				} else if (value === "pause") {
					if (!running) {
						return;
					} else {
						clearInterval(simulation);
						running = false;
						startButton.style.display = "inline";
						pauseButton.style.display = "none";
					}
				}
			}

			startButton.addEventListener('click', function () {
				startPause('start');
			});
			pauseButton.addEventListener('click', function () {
				startPause('pause');
			});
			randomButton.addEventListener('click', function () {
				game.randomise();
				game.simpleDraw();
			});
			resetButton.addEventListener('click', function () {
				startPause('pause');
				game.reset(true);
				game.simpleDraw();
			});

			window.game = game;
		})();
	</script>
</body>
</html>
